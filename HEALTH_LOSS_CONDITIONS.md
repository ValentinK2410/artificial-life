# Условия ухудшения здоровья агентов

## 1. Критически низкая температура тела
- **Условие:** `temperature < 35°C`
- **Потеря здоровья:** `(35 - temperature) * 0.02` за кадр
- **Пример:** При температуре 30°C потеря = `(35 - 30) * 0.02 = 0.1` за кадр
- **Смерть:** При температуре ниже 28°C агент умирает мгновенно

## 2. Критический голод
- **Условие:** `hunger > CRITICAL_THRESHOLD` (обычно 80)
- **Потеря здоровья:** `HEALTH_LOSS_RATE` (обычно 0.1) за кадр
- **Настройка:** `GAME_CONFIG.AGENTS.HUNGER.HEALTH_LOSS_RATE`

## 3. Смерть от переохлаждения
- **Условие:** `temperature < DEATH_TEMPERATURE` (28°C) и `health > 0`
- **Действие:** Мгновенная смерть (`health = 0`, `state = 'dead'`)
- **Настройка:** `GAME_CONFIG.AGENTS.DEATH_TEMPERATURE`

## 4. Усталость (для стариков)
- **Условие:** Для стариков при голоде
- **Потеря здоровья:** 0.8 за кадр (больше, чем у других агентов)
- **Класс:** `OldMan`, `OldWoman`

## 5. Атака хищников
- **Условие:** Атака хищника на агента
- **Потеря здоровья:** Зависит от типа хищника и защиты агента
- **Механизм:** Обрабатывается в логике хищников

## Восстановление здоровья

### 1. Сон
- **Восстановление:** `SLEEP_CONFIG.HEALTH_RESTORE_RATE` (обычно 0.1) за кадр
- **Условие:** Агент в состоянии `sleep`

### 2. Лечение другими агентами
- **Восстановление:** Зависит от свойств лечебных трав
- **Условие:** Другой агент с навыком лечения (≥5 опыта) использует лечебные травы

### 3. Потребление здоровой еды
- **Восстановление:** Зависит от свойств еды (`FOOD_PROPERTIES[type].health`)
- **Условие:** Потребление еды из категории `HEALTHY` или `SPICES`

## Настройки в constants.js

```javascript
GAME_CONFIG.AGENTS.HUNGER.HEALTH_LOSS_RATE = 0.1  // Потеря здоровья от голода
GAME_CONFIG.AGENTS.DEATH_TEMPERATURE = 28         // Температура смерти
GAME_CONFIG.AGENTS.SLEEP.HEALTH_RESTORE_RATE = 0.1 // Восстановление во сне
```
