# Настройка для продакшена

## ⚠️ ВАЖНО: Обязательные изменения перед запуском в продакшене

### 1. Измените пароль администратора

В файле `main.js` найдите строку:
```javascript
window.adminPassword = isProduction 
    ? 'CHANGE_THIS_PASSWORD_IN_PRODUCTION' // ИЗМЕНИТЕ ЭТОТ ПАРОЛЬ!
    : 'admin123';
```

**Замените `CHANGE_THIS_PASSWORD_IN_PRODUCTION` на свой сложный пароль!**

Рекомендуется использовать:
- Минимум 12 символов
- Буквы (заглавные и строчные)
- Цифры
- Специальные символы

Пример: `MyS3cur3P@ssw0rd!2024`

### 2. Настройте CORS на сервере

В файле `backend/server.js` укажите разрешенные домены:

```javascript
const corsOptions = isProduction 
    ? {
        origin: ['https://game.dekan.pro'], // Ваш домен
        methods: ["GET", "POST"],
        credentials: true
    }
    : { ... };
```

Или используйте переменную окружения:
```bash
export ALLOWED_ORIGINS="https://game.dekan.pro,https://www.game.dekan.pro"
```

### 3. Настройте переменные окружения (опционально)

Создайте файл `.env` в корне проекта:

```env
NODE_ENV=production
ADMIN_PASSWORD=ваш_сложный_пароль
ALLOWED_ORIGINS=https://game.dekan.pro
PORT=3000
```

### 4. Проверьте настройки безопасности

- ✅ Пароль администратора изменен
- ✅ CORS настроен правильно
- ✅ HTTPS включен (для продакшена обязательно!)
- ✅ Firewall настроен
- ✅ Логирование настроено

### 5. Оптимизация для продакшена

#### Минификация кода (опционально)

Для минификации JavaScript можно использовать:
- Webpack
- Rollup
- Vite
- esbuild

#### Кэширование

Настройте кэширование статических файлов в Nginx:
```nginx
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

### 6. Мониторинг

Рекомендуется настроить:
- Логирование ошибок
- Мониторинг производительности
- Резервное копирование
- Алерты при проблемах

## Текущий статус продакшена

После изменений проект автоматически определит, что он работает в продакшене, если:
- Домен не `localhost` или `127.0.0.1`
- Установлена переменная окружения `NODE_ENV=production`

## Проверка

После настройки проверьте:
1. Пароль администратора работает
2. CORS не блокирует запросы
3. Все функции работают корректно
4. Нет ошибок в консоли браузера
5. Нет ошибок в логах сервера
