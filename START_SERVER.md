# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞

## –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É"

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä Node.js –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –î–ª—è —Ä–∞–±–æ—Ç—ã –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä.

## –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ ISPmanager (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–í–æ–π–¥–∏—Ç–µ –≤ ISPmanager** –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"**
3. **–ù–∞–π–¥–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "game.dekan.pro"** –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ:
   - **–ü—É—Ç—å –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:** `/var/www/www-root/data/www/game.dekan.pro/backend`
   - **–§–∞–π–ª –∑–∞–ø—É—Å–∫–∞:** `server.js`
   - **–ü–æ—Ä—Ç:** `3000` (–∏–ª–∏ Unix socket, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
   - **–†–µ–∂–∏–º:** Production
4. **–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å"** –∏–ª–∏ "–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å"

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ SSH (–í—Ä–µ–º–µ–Ω–Ω—ã–π)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
ssh root@valentink2410

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/www-root/data/www/game.dekan.pro/backend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
npm install --production

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
NODE_ENV=production PORT=3000 node server.js
```

–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
```
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
üì° WebSocket —Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º
```

## –í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd (–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π)

–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ–∑–¥–∞–π—Ç–µ systemd —Å–µ—Ä–≤–∏—Å:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞
sudo cp artificial-life.service /etc/systemd/system/

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd
sudo systemctl daemon-reload

# –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable artificial-life

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
sudo systemctl start artificial-life

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status artificial-life
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç:**
   ```bash
   curl http://localhost:3000
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å `status: 'ok'`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   # –ï—Å–ª–∏ —á–µ—Ä–µ–∑ systemd
   sudo journalctl -u artificial-life -f
   
   # –ï—Å–ª–∏ —á–µ—Ä–µ–∑ ISPmanager
   # –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–Ω–µ–ª–∏ ISPmanager
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç:**
   ```bash
   netstat -tuln | grep 3000
   # –∏–ª–∏
   lsof -i :3000
   ```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –¥–ª—è WebSocket

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–∫—Å–∏ –¥–ª—è WebSocket:

```nginx
location /socket.io/ {
    proxy_pass http://unix:/var/www/www-root/data/nodejs/0.sock;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_read_timeout 86400;
}
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ü–æ—Ä—Ç 3000 —É–∂–µ –∑–∞–Ω—è—Ç"
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç
lsof -i :3000
# –£–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ú–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"
```bash
cd /var/www/www-root/data/www/game.dekan.pro/backend
npm install --production
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied"
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
chown -R www-data:www-data /var/www/www-root/data/www/game.dekan.pro
chmod -R 755 /var/www/www-root/data/www/game.dekan.pro
```

## –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"
3. –ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É"
4. –¢–µ–ø–µ—Ä—å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

## –í–∞–∂–Ω–æ –¥–ª—è –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞

- –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd –∏–ª–∏ ISPmanager –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Nginx –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç WebSocket
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3000 –¥–æ—Å—Ç—É–ø–µ–Ω (–∏–ª–∏ Unix socket –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
